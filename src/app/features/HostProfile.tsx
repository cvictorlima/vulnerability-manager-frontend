import styled from 'styled-components';
import { Asset } from "../../sdk/@types/Asset";
import FieldDescriptor from '../components/FieldDescriptor/FieldDescriptor';
import getFormatedDate from '../../core/utils/getFormatedDate';
import CircleChart from '../components/CircleChart';

export interface HostProfileProps {
  hostData:Asset.Detailed
}

export default function HostProfile ({hostData}:HostProfileProps) {



  if(!hostData)
    return null

  return <Wrapper>
    <Session>
      <Info>
        <PageTitle>
          Perfil do Host
        </PageTitle>
        <HostName>
          {hostData.hostname}
        </HostName>
        <HostIP>
          IP: {hostData.ip_address}
        </HostIP>
      </Info>
      <Dates>
        <FieldDescriptor field={'Criado em:'} value={getFormatedDate(hostData.created)} />
        <FieldDescriptor field={'Modificado em:'} value={getFormatedDate(hostData.modified)} />
      </Dates>
    </Session>
    <Grid>
      <div></div>
      <Risk>
        <CircleChart  
          progress={Number(hostData.risk)*10}
          size={80}
          strokeWidth={10}
          value={hostData.risk}
          theme={Number(hostData.risk) > 5 ? 'default' : 'primary'}
        />
        <RiskDescription>Risco do Host</RiskDescription>
      </Risk>
      <div style= {{display: 'flex', gap: '12px', alignItems: 'center', justifyContent: 'center' }}>
        <Vuln>
          Vulnerabilidades<br /> Ativas:
        </Vuln>
        <VulnNumber>
          {hostData.vuln_count}
        </VulnNumber>
      </div>
      <div></div>
    </Grid>
  </Wrapper>
}




const Wrapper = styled.div`
  background-color: white;
  border: solid 0.5px lightgray;

`

const Session = styled.div`
color: white;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 20px;
  padding-bottom: 20px;
  padding-right: 40px;
  padding-left: 40px;
  background: rgb(2,0,36);
  background: linear-gradient(45deg, rgba(2,0,36,1) 0%, #1f0130 50%, #3b0242 100%);
  /* width: 100vw; */
  
`
const Grid = styled.div`
display: grid;
grid-template-columns: 0.5fr 3fr 3fr 0.5fr;
padding: 12px;
`


const Info = styled.div`
  
`

const Dates = styled.div`
  display: flex;
  flex-direction: column;
  gap: 12px;
`

const HostName = styled.div`
  font-size: 2em;
`

const HostIP = styled.div`

`

const Risk = styled.div`
display: flex;
flex-direction: column;
gap: 6px;
`

const RiskDescription = styled.h3`
display: flex;
justify-content: center;
align-items: center;
`

const Vuln = styled.div`
  text-align: end;
`

const VulnNumber = styled.div`
font-size: 3em;
`

const TableName = styled.div`

`
const PageTitle = styled.h4`

`