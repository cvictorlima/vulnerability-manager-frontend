import { useEffect, useState } from "react";
import DashboardService from "../../sdk/services/dashboard.service";
import Chart from "../components/Chart/Chart";

export interface SeverityChartProps {
  token: string
}

export default function SeverityChart ({token}:SeverityChartProps) {

  const [severityList, setSeverityList] = useState<string[]>()
  const [dataList, setDataList] = useState<number[]>()

  useEffect(()=>{
    DashboardService
      .getSeverityChart(token)
      .then(response => {
        setSeverityList(Object.keys(response))
        setDataList(Object.values(response))
      })
    },[token])
    
  const options: Highcharts.Options = {
    title: {
        text: 'Vulnerabilidades por Severidade'
    },
    xAxis:{
      categories: severityList
    },
    yAxis:{
      title: {
        text: 'NÃºmero de Hosts'
      }
    },
    series: [
      
      {
        name: 'Severidade',
        type: 'column',
        data: dataList
    }]
}

  return <Chart options={options} />
}