import { useEffect, useState } from "react"
import styled from "styled-components"
import CircleChart from "../components/CircleChart"
import { Dashboard } from "../../sdk/@types/Dashboard"
import DashboardService from "../../sdk/services/dashboard.service"

export interface Dashboard3Props {
  token: string
}

export default function Dashboard3 ({token}:Dashboard3Props) {
  const [hostData, setHostData] = useState<Dashboard.CardAsset>()
  // const [progress, setProgress] = useState<number>(0)
  console.log(token)

  
  useEffect(()=> {
    DashboardService
      .getAssetCard(token)
      .then(response=> {setHostData(response)
    // DashboardService
    //   .
      })
  },[token])

  if (!hostData)
    return null

  return <Wrapper>
    <Section>
      <CircleChart 
        progress={hostData.vulnerable_asset_count*100/hostData.asset_count}
        size={100}
        strokeWidth={5}
        theme="default"
        value={hostData?.vulnerable_asset_count}
        
      />
    </Section>
  </Wrapper>
}

const Wrapper = styled.div`

`

const Section = styled.div`

`