import { useEffect, useState } from 'react'
import Button from '../../components/Button/Button'
import Input from '../../components/Input/Input'
import LoginService from '../../sdk/services/Login.service';
import * as L from './Login.styles'



export default function Login () {

  // const user = {
  //   username: 'username1',
  //   password: 'password1'
  // }

  const [user, setUser] = useState({username:'', password:''});
  // const [error, setError] = useState('');

  const [token, setToken] = useState("")

  function handleFormSubmit (e: React.FormEvent<HTMLFormElement>) {
    e.preventDefault();
    const userdata = {
          "username": user.username,
          "password": user.password,
    }
    // axios({
    //   method: 'post',
    //   url: 'http://201.49.62.134:8080/api-token-auth/',
    //   headers: { },
    //   data : {
    //     "username": user.username,
    //     "password": user.password,
    //   }
    // })
    // .then(function (response) {
    //   console.log(JSON.stringify(response.data));
    // })
    // .catch(function (error) {
    //   console.log(error);
// });

    LoginService
      .getToken(userdata)
      .then(setToken)

    console.log(JSON.stringify(token))
  }

  

  return <L.Wrapper>
    <L.Title>Login</L.Title>
    <L.Form onSubmit={handleFormSubmit}>
      <Input label='UsuÃ¡rio' placeholder='cvictorlima' onChange={e=> setUser ({...user, username: e.target.value})} value={user.username} />
      <Input label='Senha' placeholder='**********' type='password' onChange={e=> setUser ({...user, password: e.target.value})} value={user.password} />
      <Button variant='primary' label='LOGIN'  type='submit'/>
    </L.Form>
  </L.Wrapper>
}